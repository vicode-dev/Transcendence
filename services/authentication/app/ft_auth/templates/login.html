<head>
	<!-- Latest compiled and minified CSS -->
	<link 
		href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
		rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
		crossorigin="anonymous"
	>
</head>

<body>
	<div class="container">
		<div class="d-flex justify-content-center">
			<div class="col-md-6 col-md-offset-3">
				<h2>Login</h2>
				<form action="" method="post" class="form-horizontal">
					<div class="form-group">
						<label for="login" class="col-sm-3 control-label">Login Name</label>
						<div class="col-sm-9">
							<input
								type="text" class="form-control"
								{% if login != None %}
									value="{{ login }}"
								{% endif %}
								placeholder="Enter login name" name="login" required>
						</div>
					</div>
					<div class="form-group">
						<label for="password" class="col-sm-3 control-label">Password</label>
						<div class="col-sm-9">
							<input
								type="password" class="form-control"
								placeholder="Enter Password" name="password" required>
						</div>
					</div>
					{% if error != None %}
						<code>{{ error }}</code>
					{% endif %}
					<div class="form-group"> <br>
						<div class="col-sm-offset-3 col-sm-9">
							<button type="submit" class="btn btn-primary btn-block">Login</button>
						</div>
					</div>
	
					<div class="text-center" style="background-color:#f1f1f1; padding: 15px; margin-top: 20px;">
						<p>No account yet ? <a href="/register">Create one</a></p>
						<p>
							Or
							<a
								target="_blank"
								onclick="startSessionCheck();"
								href="https://api.intra.42.fr/oauth/authorize?client_id=u-s4t2ud-d994d34fee9548150795820d0569584f13de3c53f31275bffaf05b5860c6cf9f&redirect_uri=https%3A%2F%2Ftranscendence.vicode.dev%2F42-oauth2&response_type=code">
								login with 42
							</a>
						</p>
					</div>
				</form>
			</div>
		</div>
	</div>

	<!-- Latest compiled and minified JavaScript -->
	<script type="text/javascript">
		function getQueryParams()
		{
			return (new URLSearchParams(location.search));
		}
		function getCookie(name)
		{
			const nameString = name + "="

			const value = document.cookie.split(";").filter(item => {
				return item.includes(nameString);
			})

			if (value.length)
				return (value[0].substring(nameString.length, value[0].length));
			return (undifined);
		}
		function checkSession()
		{
			const session = getCookie("session");
			if (session)
				window.location.replace("https://transcendence.vicode.dev/"+window.location.search);
		}
		function startSessionCheck()
		{
			setInterval(checkSession, 3000)
		}
	</script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>