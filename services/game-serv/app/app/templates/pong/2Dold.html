{% load static %}

{% block stylesheets %}
<link rel="stylesheet" href="{% static 'pong/local/pong2D.css' %}">
{% endblock %}

{% if online == True %}
{% if game.maxPlayers == 4 %}
<script src="{% static 'pong/online/gameLoop4p.js' %}"></script>
{% endif %}
{% if game.maxPlayers == 2 %}
<script src="{% static 'pong/online/gameLoop2p.js' %}"></script>
{% endif %}
{% endif %}
{% if online == False %}
{% if game.maxPlayers == 4 %}
<script src="{% static 'pong/local/gameLoop4p.js' %}"></script>
{% endif %}
{% if game.maxPlayers == 2 %}
<script src="{% static 'pong/local/gameLoop2p.js' %}"></script>
{% endif %}
{% endif %}

<!-- <div class="test"> -->

<div class="wrapper d-flex flex-column align-items-center">
    <!-- {% if online == True %} -->
    <div class="start-btn">
        <div class="d-flex justify-content-center align-items-center scores mt-2 mb-3">
            <div class="mx-4">
                Player 1 <div id="player1"></div>
                <p class="score">
                    Score:
                <div id="score1">{{game.score.0}}</div>
                </p>
            </div>
            <div class="mx-4">
                Player 2 <div id="player2"></div>
                <p class="score">
                    Score:
                <div id="score2">{{game.score.1}}</div>
                </p>
            </div>
            {% if game.maxPlayers == 4 %}
            <div class="mx-4">
                Player 3 <div id="player3"></div>
                <p id="score1" class="score">
                    Score:
                <div id="score3">{{game.score.2}}</div>
                </p>
            </div>
            <div class="mx-4">
                Player 4 <div id="player4"></div>
                <p id="score2" class="score">
                    Score:
                <div id="score4">{{game.score.3}}</div>
                </p>
            </div>
            {% endif %}
        </div>
    </div>
    <!-- {% else %} -->
    {% if online == False %}
    <button class="start-btn d-flex justify-content-center align-items-center" onclick="gameLoop()">
        <div class="btn-text">
            start
        </div>
    </button>
    {% endif %}


    <div class="pong-main-content d-flex justify-content-center align-items-center m-2">

        <!-- {% if game.maxPlayers == 4 %}
            <div class="flex-row">
                <button>-></button>
                <button><-</button>
            </div>
        {% endif %} -->
        <!-- {% if online == False %} -->
        <div id="left-arrows" class="flex-shrink-1 arrows arrows-left d-flex align-items-center"
            style="transform: rotate(-90deg);">
            <button id="left-arrow-up" class="m-2 arrows-btn rounded-2">
                <i class="fas fa-solid fa-arrow-left"></i>
            </button>
            <button id="left-arrow-down" class="m-2 arrows-btn rounded-2">
                <i class="fas fa-solid fa-arrow-right"></i>
            </button>
        </div>
        <!-- {% endif %} -->

        <div class="pong-board flex-grow-2 d-flex flex-column justify-content-center align-items-center m-2">
            <!-- <svg id="gameBoard" viewBox="0 0 9 9"> -->
            <svg id="gameBoard" viewBox="0 0 9 9"
                style="background-color: lightgreen; border: none; border-radius: 2%;">
                <!-- <circle cx="50%" cy="50%" r="1" style="fill: var(--secondary-color);" /> -->
                <line x1="4.5" y1="-10" x2="4.5" y2="20" stroke-width="0.05" style="stroke: white;" />
                <rect x="2" y="1.5" width="5" height="6" style="stroke: white; fill: none;" stroke-width="0.05" />
                <line x1="0" y1="1.5" x2="9" y2="1.5" style="stroke: white; fill: none;" stroke-width="0.05" />
                <line x1="2" y1="4.5" x2="7" y2="4.5" style="stroke: white; fill: none;" stroke-width="0.05" />
                <line x1="0" y1="7.5" x2="9" y2="7.5" style="stroke: white; fill: none;" stroke-width="0.05" />

                <!-- <line x1="4.5" y1="-10" x2="4.5" y2="20" stroke-dasharray="0.4, 0.5" stroke-width="0.05" style="stroke: var(--secondary-color);"/> -->
                <!-- Left Paddle -->
                <rect id="leftPaddle" x="0" y="3.75" width="0.25" height="1.5" style="fill: var(--accent-color);" />
                <!-- Right Paddle -->
                <rect id="rightPaddle" x="8.75" y="3.75" width="0.25" height="1.5" style="fill: var(--accent-color);" />
                {% if game.maxPlayers == 4 %}
                <!-- Top Paddle -->
                <rect id="topPaddle" x="3.75" y="0" width="1.5" height="0.25" style="fill: var(--secondary-color);" />
                <!-- Bottom Paddle -->
                <rect id="bottomPaddle" x="3.75" y="8.75" width="1.5" height="0.25"
                    style="fill: var(--secondary-color);" />
                {% endif %}
                <!-- Ball -->
                <g id="ball">
                    <circle cx="0" cy="0" r="0.125" fill="dark" />
                </g>
                <text id="3" x="4" y="5.20" style="font: bold 2px sans-serif; display: none;">3</text>
                <text id="2" x="4" y="5.20" style="font: bold 2px sans-serif; display: none;">2</text>
                <text id="1" x="4" y="5.20" style="font: bold 2px sans-serif; display: none;">1</text>
            </svg>



        </div>
        {% if online == False %}
        <div id="right-arrows" class="flex-shrink-1 arrows arrows-right d-flex align-items-center"
            style="transform: rotate(-90deg);">
            <button id="right-arrow-up" class="m-2 arrows-btn rounded-2">
                <i class="fas fa-solid fa-arrow-left"></i>
            </button>
            <button id="right-arrow-down" class="m-2 arrows-btn rounded-2">
                <i class="fas fa-solid fa-arrow-right"></i>
            </button>
        </div>
        {% endif %}
        <!-- {% if game.maxPlayers == 4 %}
        <div class="d-flex flex-row">
            <button>-></button>
            <button><-</button>
        </div>
        {% endif %} -->
    </div>
    <!-- {% if online == False %}
    <div class="d-flex justify-content-center align-items-center scores mt-2 mb-5">
        <div class="mx-4">
            Player 1
            <p id="score1" class="score">
                Score: {{ game.score.0 }}
            </p>
        </div>
        <div class="mx-4">
            Player 2
            <p id="score2" class="score">
                Score: {{ game.score.1 }}
            </p>
        </div>
        {% if game.maxPlayers == 4 %}
        <div class="mx-4">
            Player 3
            <p id="score3" class="score">
                Score: {{ game.score.2 }}
            </p>
        </div>
        <div class="mx-4">
            Player 4
            <p id="score4" class="score">
                Score: {{ game.score.3 }}
            </p>
        </div>
        {% endif %}
    </div>
    {% else %} -->
    <div id="left-arrows" class="flex-shrink-1 arrows arrows-left d-flex align-items-center mt-4 mb-3">
        <button id="left-arrow-up" class="m-2 arrows-btn rounded-2 mx-4">
            <i class="fas fa-solid fa-arrow-left"></i>
        </button>
        <button id="left-arrow-down" class="m-2 arrows-btn rounded-2 mx-4">
            <i class="fas fa-solid fa-arrow-right"></i>
        </button>
    </div>
    <!-- {% endif %} -->

    {% if online == True %}
    {% include "disconectPopup.html" %}
    {% endif %}
</div>
<!-- </div> -->